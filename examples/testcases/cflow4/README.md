All graphlets stored in the folder "known-good-graphlets" got generated with most recent HAPviewer as of the 17th February 2011 and are used as references.

Since the version of the 17th has/had some bugs...

* the file demo.gz in examples/cflow4/ got used as input
* affected (wrong) graphlets got corrected manually

Note: For future testing please use the splitted files in this folder

To compare the graphlets generated by the old HAPviewer version with the boost graph library, the following patch has been applied:

	--- HAPviewer_17FEB2011/ghpgdata.cpp.original	2011-12-07 23:38:12.395141700 +0100
	+++ HAPviewer_17FEB2011/ghpgdata.cpp	2011-12-07 09:50:08.889369319 +0100
	@@ -1555,14 +1555,15 @@ bool ChpgData::hpg2dot3(int index, char
	 	char st[] = { "k1_" };
	 	// We expect first edge to have rank=localIP_prot
	 	// (must be an edge incident to localIP)
	+	static int counter_for_unique_subgraphs = 0;
	 	if (rank==localIP_prot) {
	 		uint32_t localIP = value[1];
	 		// Rank list
	 		if (prefix) {
	-			outfs << "{rank=same;\"localIP\";" << st << localIP << ";}\n";
	+			outfs << "subgraph " << counter_for_unique_subgraphs++ << " {rank=same;\"localIP\";" << st << localIP << ";}\n";
	 			if (dbg5) cout << "{rank=same;\"localIP\";" << st << localIP << ";}\n";
	 		} else {
	-			outfs << "{rank=same;\"localIP\";" << localIP << ";}\n";
	+			outfs << "subgraph " << counter_for_unique_subgraphs++ << " {rank=same;\"localIP\";" << localIP << ";}\n";
	 		}
	 		// Node annotation
	 		char adr[16];
	@@ -1615,7 +1616,8 @@ bool ChpgData::hpg2dot3(int index, char
	 			if (last_rank != totalBytes) { // Suppress for pseudo node that is not visualized
	 
	 				// a) Output header text for "same rank" list
	-				outfs << "{rank=same;"; if (dbg5) cout << "{rank=same;";
	+				outfs << "subgraph " << counter_for_unique_subgraphs++ << " {rank=same;";
	+				if (dbg5) cout << "{rank=same;";
	 
	 				// b) Output "pseudo node" as descriptive text for old partition
	 				switch (last_rank) {

To allow the haplibtest programm to compile, the following patches have been applied:

	--- HAPviewer_17FEB2011/ginterface.cpp.original	2011-12-07 23:40:43.255362960 +0100
	+++ HAPviewer_17FEB2011/ginterface.cpp	2011-12-06 18:06:20.886437913 +0100
	@@ -76,7 +76,9 @@ bool CInterface::handle_binary_import(st
	 			return false;
	 		}
	 
	-	} else if (itype == CImport::isPcap) {
	+	} 
	+	#ifdef PCAP
	+	else if (itype == CImport::isPcap) {
	 		if (netmask == 0) {
	 			// Network address and/or prefix are invalid: do not continue
	 			return false;
	@@ -90,7 +92,10 @@ bool CInterface::handle_binary_import(st
	 			return false;
	 		}
	 
	-	} else if (itype == CImport::isNfdump) {
	+	} 
	+	#endif
	+	#ifdef NFDUMP
	+	else if (itype == CImport::isNfdump) {
	 
	 		// Is nfdump binary data
	 		try {
	@@ -101,7 +106,10 @@ bool CInterface::handle_binary_import(st
	 			return false;
	 		}
	 
	-	} else if (itype == CImport::isIpfix) {
	+	}
	+	#endif
	+	#ifdef IPFIX
	+	else if (itype == CImport::isIpfix) {
	 
	 		// Is nfdump binary data
	 		try {
	@@ -112,7 +120,9 @@ bool CInterface::handle_binary_import(st
	 			return false;
	 		}
	 
	-	} else {
	+	}
	+	#endif
	+	else {
	 
	 		string errtext = "unknown file type (hint: supported are *.gz, *.pcap, nfcapd* and *.dat)\n";
	 		cerr << errtext << endl;

	--- HAPviewer_17FEB2011/gimport.h.original	2011-12-07 23:40:10.165314424 +0100
	+++ HAPviewer_17FEB2011/gimport.h	2011-12-06 18:04:30.306275711 +0100
	@@ -101,9 +101,15 @@ class CImport
	 
	 		// Flow imports
	 		void read_cflow_file();
	+		#ifdef PCAP
	 		void read_pcap_file(uint32_t local_net, uint32_t netmask);
	+		#endif // PCAP
	+		#ifdef NFDUMP
	 		void read_nfdump_file(uint32_t local_net, uint32_t netmask);			
	+		#endif
	+		#ifdef IPFIX
	 		void read_ipfix_file(uint32_t local_net, uint32_t netmask);	
	+		#endif // IPFIX
	 		void cflow2hpg();
	 
	 		// Flow helper functions

